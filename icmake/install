void reqzip(string dest, string src)
{
    list files;
    int idx;
    string file;

    files = strtok(src, " ");
    for (idx = sizeof(files); idx--; )
    {
        file = element(idx, files);
        run("gzip -9 < " + file + " > " + dest + file + ".gz");
    }
}
    
void install(string root)
{
    if (root != "")
    {
        md(root);
        root = chdir(root);
    }

    chdir(g_cwd);

    md(root + DOC);

    md(root + MAN + "/man7");
    run("gzip -9 < tmp/man/cpp-annotations.7 > " +
                    root + MAN + "/man7/cpp-annotations.7.gz");


    reqzip(root + DOC + "/", 
            "README README.papersize README.legalese changelog");

    chdir("tmp/docs/txt");
    reqzip(root + DOC + "/", "cplusplus.txt");

    chdir("..");

    run("zip -r " + root + DOC + "/cplusplus.html.zip  html");

    run("zip " + root + DOC + "/cplusplus.ps.zip    latex/cplusplus*.ps");
    run("zip " + root + DOC + "/cplusplus.pdf.zip   latex/cplusplus*.pdf");

    run("zip -r " + root + DOC + "/cplusplus.latex.zip latex/*"
                                    " -x cplusplus\*.pdf -x cplusplus\*ps");

    chdir(g_cwd);

    md(root + DOC + "/contrib");

    run("cp contributions/*.zip " + root + DOC + "/contrib");
    chdir("contributions");
    reqzip(root + DOC + "/contrib/", 
            "chist.html chist.pdf chist.ps java_cpp_keywords.html "
                                                        "GGD.algorithm");
    
    printf("\n  Installation completed\n");

    exit(0);
}
