/*SYMBOLS*/
%filenames scanner
%debug

%x      comment
%x      include

/**/
/*RULES*/
%%
//                           Flexc++ rules area:
//                           ~~~~~~~~~~~~~~~~~~~
//   The following regular expressions define what the lexer will recognize.

    // The comment-rules: comment is ignored.
//.*                    // ignore eoln comment
"/*"                    begin(StartCondition_::comment);
<comment>{
    .|\n                // ignore all characters in std C comment
    "*/"                begin(StartCondition_::INITIAL);
}

    // File switching: #include <filepath>
#include[ \t]+"<"      begin(StartCondition_::include);
<include>{
    [^ \t>]+            d_nextSource = matched();
    ">"[ \t]*\n         switchStream();
    .|\n                throw INVALIDINCLUDE;
}

    // The default rule: echo anything else to std::cout
.|\n                    ECHO;

    
<<EOF>>                 {
                            if (!popSource(YY_CURRENT_BUFFER))
                                yyterminate();
                        }
%%
/**/
